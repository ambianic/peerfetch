<!DOCTYPE html>

<html lang="en">
 <head>
  <meta charset="utf-8" />
  <title>PeerFetch Hello World</title>
  <script src="/javascript/peerfetch/dist/peerfetch.js"></script>
 </head>

 <body>
  <script type="module">
    const PeerFetch = window.peerfetch.PeerFetch

    console.debug(PeerFetch)
    console.debug(Object.keys(PeerFetch))
    
    async function get() {
      console.debug({ PeerFetch })
      // initial setup of PeerFetch on the p2p network
      const remotePeerID = '0527fc3d-7e83-4ce5-b133-1089af69b567'
      const peerFetch = new PeerFetch({
        host: 'ambianic-pnp.herokuapp.com',
        port: 443,
        secure: true,
      })
      await peerFetch.connect(remotePeerID)

      // ready to use as a regular HTTP client
      const response = await peerFetch.get('http://localhost/status')
      console.debug({ response })
      return response
    }

    get().then((response) => alert(response)).catch((err) => console.error(err))
  </script>
 </body>
</html>

